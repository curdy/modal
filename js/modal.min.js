!function(a){"use strict";var b=a(document),c=a("body"),d=a("html").add(c),e={};a.modal=function(f){function g(){var g=this;g.isActive=!1;var h=a.extend({content:"",contentUrl:null,useCache:!0,youtubeId:null,class:"",closeBtn:!0,layerClose:!0,closingSelectors:null,showOnInit:!0,fadeInDuration:400,fadeOutDuration:400,beforeModalOpen:null,afterModalOpen:null,beforeModalClose:null,afterModalClose:null},f),i=function(){j(),h.contentUrl&&r(),h.youtubeId&&q()},j=function(){var c="modal "+h.class;h.youtubeId&&(c+=" modal-youtube"),g.$wrapper=a("<div>",{class:"modal-wrapper"}),g.$layer=a("<div>",{class:"modal-layer"}),g.$modal=a("<div>",{class:c}),h.closeBtn&&(g.$closeBtn=a("<button>",{class:"modal-close-btn"}).html('<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 96 96" width="12" height="12"><polygon fill="currentColor" points="96,14 82,0 48,34 14,0 0,14 34,48 0,82 14,96 48,62 82,96 96,82 62,48 "/></svg>'),g.$modal.append(g.$closeBtn)),g.$content=a("<div>",{class:"modal-content"}).html(h.content),g.$modal.append(g.$content),g.$wrapper.append(g.$layer),g.$wrapper.append(g.$modal),g.$wrapper.hide(),h.showOnInit&&g.open()};g.updateContent=function(a){g.$content.html(a)},g.open=function(){"function"==typeof h.beforeModalOpen&&h.beforeModalOpen(g),o(),m(),g.$wrapper.fadeIn(h.fadeInDuration,function(){g.isActive=!0,"function"==typeof h.afterModalOpen&&h.afterModalOpen(g)})},g.close=function(){"function"==typeof h.beforeModalClose&&h.beforeModalClose(g),g.$wrapper.fadeOut(h.fadeOutDuration,function(){p(),n(),g.isActive=!1,"function"==typeof h.afterModalClose&&h.afterModalClose(g)})};var k=function(){h.closeBtn&&g.$closeBtn.click(g.close),h.layerClose&&g.$layer.click(g.close),h.closingSelectors&&g.$modal.on("click",h.closingSelectors.toString(),g.close)},l=b.scrollTop(),m=function(){d.toggleClass("modal-active"),d.scrollTop(l)},n=function(){d.toggleClass("modal-active"),d.scrollTop(l),l=b.scrollTop()},o=function(){c.append(g.$wrapper),k()},p=function(){g.$wrapper.remove()},q=function(){var b=a("<iframe>",{css:{width:"100%",height:"100%",display:"block"},src:"https://www.youtube.com/embed/"+h.youtubeId,frameborder:0,allowfullscreen:"allowfullscreen"});g.updateContent(b)},r=function(){if(h.useCache&&e[h.contentUrl]){var b=e[h.contentUrl];g.updateContent(b)}else a.get(h.contentUrl,function(a){var b=a;g.updateContent(b),e[h.contentUrl]=b}).fail(function(){console.log("Ajax failed - wrong URL?")})};return i(),g}return new g}}(jQuery);