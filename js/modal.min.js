!function(a){"use strict";var b=a("body"),c=a("html").add(b),d={};a.modal=function(e){function f(){var f=this;f.isActive=!1;var g=a.extend({content:"",contentUrl:null,useCache:!0,youtubeId:null,class:"",closeBtn:!0,layerClose:!0,closingSelectors:null,showOnInit:!0,fadeInDuration:400,fadeOutDuration:400,beforeModalOpen:null,afterModalOpen:null,beforeModalClose:null,afterModalClose:null},e),h=function(){i(),g.contentUrl&&o(),g.youtubeId&&n()},i=function(){var c="modal "+g.class;g.youtubeId&&(c+=" modal-youtube"),f.$wrapper=a("<div>",{class:"modal-wrapper"}),f.$layer=a("<div>",{class:"modal-layer"}),f.$modal=a("<div>",{class:c}),g.closeBtn&&(f.$closeBtn=a("<button>",{class:"modal-close-btn"}).html('<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 96 96" width="12" height="12"><polygon fill="currentColor" points="96,14 82,0 48,34 14,0 0,14 34,48 0,82 14,96 48,62 82,96 96,82 62,48 "/></svg>'),f.$modal.append(f.$closeBtn)),f.$content=a("<div>",{class:"modal-content"}).html(g.content),f.$modal.append(f.$content),f.$wrapper.append(f.$layer),f.$wrapper.append(f.$modal),f.$wrapper.hide(),g.showOnInit&&f.open()};f.updateContent=function(a){f.$content.html(a)},f.open=function(){"function"==typeof g.beforeModalOpen&&g.beforeModalOpen(f),l(),k(),f.$wrapper.fadeIn(g.fadeInDuration,function(){f.isActive=!0,"function"==typeof g.afterModalOpen&&g.afterModalOpen(f)})},f.close=function(){"function"==typeof g.beforeModalClose&&g.beforeModalClose(f),f.$wrapper.fadeOut(g.fadeOutDuration,function(){m(),k(),f.isActive=!1,"function"==typeof g.afterModalClose&&g.afterModalClose(f)})};var j=function(){g.closeBtn&&f.$closeBtn.click(f.close),g.layerClose&&f.$layer.click(f.close),g.closingSelectors&&f.$modal.on("click",g.closingSelectors.toString(),f.close)},k=function(){c.toggleClass("modal-active")},l=function(){b.append(f.$wrapper),j()},m=function(){f.$wrapper.remove()},n=function(){var b=a("<iframe>",{css:{width:"100%",height:"100%",display:"block"},src:"https://www.youtube.com/embed/"+g.youtubeId,frameborder:0,allowfullscreen:"allowfullscreen"});f.updateContent(b)},o=function(){if(g.useCache&&d[g.contentUrl]){var b=d[g.contentUrl];f.updateContent(b)}else a.get(g.url,function(a){var b=a;f.updateContent(b),d[g.contentUrl]=g.content}).fail(function(){console.log("Ajax failed - wrong URL?")})};return h(),f}return new f}}(jQuery);