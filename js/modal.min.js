!function(a){"use strict";var b=a(document),c=a("body"),d=a("html").add(c),e={};a.modal=function(f){function g(){var g=this,h=!1;g.isActive=!1;var i=a.extend({content:"",contentUrl:null,useCache:!0,youtubeId:null,class:"",closeBtn:!0,layerClose:!0,closingSelectors:null,showOnInit:!0,fadeInDuration:400,fadeOutDuration:400,beforeModalOpen:null,afterModalOpen:null,beforeModalClose:null,afterModalClose:null},f),j=function(){i.showOnInit&&g.open()},k=function(){var c="modal "+i.class;i.youtubeId&&(c+=" modal-youtube"),g.$wrapper=a("<div>",{class:"modal-wrapper"}),g.$layer=a("<div>",{class:"modal-layer"}),g.$modal=a("<div>",{class:c}),i.closeBtn&&(g.$closeBtn=a("<button>",{class:"modal-close-btn"}).html('<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 96 96" width="12" height="12"><polygon fill="currentColor" points="96,14 82,0 48,34 14,0 0,14 34,48 0,82 14,96 48,62 82,96 96,82 62,48 "/></svg>'),g.$modal.append(g.$closeBtn)),g.$content=a("<div>",{class:"modal-content"}).html(i.content),g.$modal.append(g.$content),g.$wrapper.append(g.$layer),g.$wrapper.append(g.$modal),g.$wrapper.hide(),i.contentUrl&&s(),i.youtubeId&&r(),h=!0};g.updateContent=function(a){g.$content.html(a)},g.open=function(){h||k(),"function"==typeof i.beforeModalOpen&&i.beforeModalOpen(g),p(),n(),g.$wrapper.fadeIn(i.fadeInDuration,function(){g.isActive=!0,"function"==typeof i.afterModalOpen&&i.afterModalOpen(g)})},g.close=function(){"function"==typeof i.beforeModalClose&&i.beforeModalClose(g),g.$wrapper.fadeOut(i.fadeOutDuration,function(){q(),o(),g.isActive=!1,"function"==typeof i.afterModalClose&&i.afterModalClose(g)})};var l=function(){i.closeBtn&&g.$closeBtn.click(g.close),i.layerClose&&g.$layer.click(g.close),i.closingSelectors&&g.$modal.on("click",i.closingSelectors.toString(),g.close)},m=0,n=function(){m=b.scrollTop(),d.css("top",-m+"px").addClass("modal-active")},o=function(){d.css("top","").removeClass("modal-active").scrollTop(m)},p=function(){c.append(g.$wrapper),l()},q=function(){g.$wrapper.remove()},r=function(){var b=a("<iframe>",{css:{width:"100%",height:"100%",display:"block"},src:"https://www.youtube.com/embed/"+i.youtubeId,frameborder:0,allowfullscreen:"allowfullscreen"});g.updateContent(b)},s=function(){if(i.useCache&&e[i.contentUrl]){var b=e[i.contentUrl];g.updateContent(b)}else a.get(i.contentUrl,function(a){var b=a;g.updateContent(b),e[i.contentUrl]=b}).fail(function(){console.log("Ajax failed - wrong URL?")})};return j(),g}return new g}}(jQuery);